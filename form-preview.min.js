/*! Form-Preview 2014-11-25 */
!function(a){function b(b){this.target=b.target,this.form=a(b.form).first(),this.fields=this.form.find(b.fields),this.event=b.event,this.initiated=!1,this.data={},this.processors={},b.init(this),this.setup()}if("function"==typeof a.fn.preview||"function"==typeof a.fn.extract)throw new Error("$.fn.preview or $.fn.extract is already defined!");b.prototype.version="v0.1",b.prototype.constructor=b,b.prototype.setup=function(){if(!this.initiated){var b=this;this.fields.on(this.event,function(){var c=a(this),d=c.extract();d&&(d.value=b.process(d.name,d.value),b.update(d.name,d.value),b.preview(d.name))}),this.collect(),this.preview()}},b.prototype.process=function(a,b){var c=b,d=this.processors[a];return d&&(b=d(a,b,this.data)),void 0===b&&(b=c),b},b.prototype.collect=function(){var b=this;this.fields.each(function(){var c=a(this),d=c.extract();d.value=b.process(d.name,d.value),d&&b.update(d.name,d.value)})},b.prototype.update=function(a,b){return a?void(this.data[a]=b):!1},b.prototype.preview=function(b){if(!b){var c=this;return void a.each(this.data,function(a){c.preview(a)})}var d=this.data[b],e=this.target.find("[data-preview="+b+"]"),f=e.attr("data-attr"),g=e.attr("data-pattern");g&&(d=g.replace(/%s/g,d)),f?e.attr(f,d):e.html(d)},b.prototype.addProcessor=function(a,b,c){return this.processors[a]&&!c?!1:void(this.processors[a]=b)},a.fn.extract=function(){var a=this.attr("name");return a?{name:a,value:this.val()}:!1},a.fn.preview=function(c){if("string"!=typeof c.form)throw new TypeError('Option "form" must be a string. Given: '+typeof c.form);var d={fields:"input, textarea, select",event:"input",init:function(){}};c=a.extend(d,c),c.target=this;var e=new b(c);return e}}(jQuery);